# iceOS – example environment file
# Copy this file to `.env` (in project root) and fill in your values.

# --- Core API keys ---------------------------------------------------------
OPENAI_API_KEY=
ANTHROPIC_API_KEY=
GOOGLE_API_KEY=
DEEPSEEK_API_KEY=
# --- API Auth ---------------------------------------------------------------
# Development convenience: allow dev-token only when explicitly enabled.
ICE_ALLOW_DEV_TOKEN=1
ICE_API_TOKEN=dev-token
# Observability (optional)
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel:4318
OTEL_SERVICE_NAME=iceos-api

# Rate limiting (dev defaults)
ICE_RATE_WINDOW_SECONDS=10.0
ICE_RATE_MAX_REQUESTS=5

# CORS allowed origins (comma-separated). Use * only in local dev.
CORS_ORIGINS=http://localhost:3000
# Allow wildcard only if explicitly set (do not enable in prod)
ALLOW_CORS_WILDCARD=0

# Optional Trusted hosts list (comma-separated), e.g., staging/prod hostnames
TRUSTED_HOSTS=


# --- Redis -----------------------------------------------------------------
# Connection string used by the orchestration runtime. Makefile's `dev` target
# automatically starts a local Redis container on port 6379.
REDIS_URL=redis://localhost:6379/0

# Production-grade Redis client tuning (optional)
REDIS_CLIENT_NAME=ice_api
REDIS_DECODE_RESPONSES=1
REDIS_SOCKET_TIMEOUT=5.0
REDIS_SOCKET_CONNECT_TIMEOUT=3.0
REDIS_MAX_CONNECTIONS=100
# Provide CA bundle path when using TLS (rediss://)
REDIS_SSL_CA_CERTS=

# Optional: Redis Sentinel (set instead of REDIS_URL)
# Comma-separated host:port endpoints and master name
REDIS_SENTINEL_ENDPOINTS=
REDIS_SENTINEL_MASTER_NAME=

# Data retention (optional)
# Chat session history TTL in seconds (e.g., 30d)
CHAT_TTL_SECONDS=2592000
# Execution metadata TTL in seconds (e.g., 7d)
EXECUTION_TTL_SECONDS=604800

# --- Budget enforcement ------------------------------------------------------
# Maximum allowed estimated workflow cost in USD for a single run. If unset,
# falls back to orchestrator runtime config. Set to empty to disable.
ORG_BUDGET_USD=5.00

# --- Database (Postgres + pgvector) -----------------------------------------
# When set, API will use Postgres and can auto-run migrations
DATABASE_URL=postgresql+asyncpg://iceos:iceos@localhost:5432/iceos
ICEOS_RUN_MIGRATIONS=1

# --- Demo packs ------------------------------------------------------------
# Comma-separated list of demo module paths to auto-load at API startup.
# Leave empty to use the built-in defaults.
ICEOS_OPTIONAL_PACKS=

# --- Plugins Manifests (built-ins on first run) -----------------------------
# Comma-separated list of absolute/relative paths to plugin manifests.
# Ensure bundles and kits are visible in Library → Templates.
ICEOS_PLUGIN_MANIFESTS=plugins/kits/tools/memory/plugins.v0.yaml,plugins/kits/tools/search/plugins.v0.yaml,plugins/bundles/chatkit/bundle.yaml,plugins/bundles/getting_started/bundle.yaml,plugins/bundles/patterns/bundle.yaml,plugins/bundles/library_assistant/bundle.yaml
